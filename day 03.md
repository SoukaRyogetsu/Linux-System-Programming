# Vim 的使用
vim 分为两种状态，即命令状态和编辑状态  
进编辑状态的方法下面有很多，从编辑状态进入命令状态要按 ESC 键
首先， vim The_Holy_Bible.txt  

## 1.添加
```
a  从光标后面开始添加文本
A  从光标所在行的末尾开始添加文本插入
i  从光标前面开始插入文本
I  从光标所在行的开始处插入文本
```
## 2.删除
```
x  删除光标处的字符
dd  删除光标所在的整行
[数字n]dd  删除光标所在行以及下面的n行
D  删除光标到行尾的文本，常用于删除注释语句
```
## 3.光标移动
```
^  光标移动到行首
$  光标移动到行尾
Ctrl+d  向下翻半页
Ctrl+f  向下翻一页
Ctrl+u  向上翻半页
Ctrl+b  向上翻一页
gg  光标定位到文档头
G  光标定位到文档尾
H  光标定位到当前页首
L  光标定位到当前页的最后一行的行首
w  光标往后移一个字
b  光标往前移一个字
[n]+  光标向后移动n 行,[n]表示一个整数10+
[n]-  光标向前移动n 行,[n]表示一个整数10-
[n]G  光标定位到第n 行行首, [n]表示一个整数20G
```
## 4.查找与替换
```
/[字符串]  查找字符串，然后按 n ，移动到下一个找到的字符串，或者按 N ，移动到上一个找到的字符串
:s/[字符串1]/[字符串2]  将这一行第一次出现的字符串1替换为字符串2，如果这一行没有字符串1，则报错提示未找到
:s/[字符串1]/[字符串2]/i  忽略字符串1中字母大小写后替换为字符串2
:s/[字符串1]/[字符串2]/g  将改行全部的字符串1替换为字符串2
:3,6 s/[字符串1]/[字符串2]/ig  在第三行到第六行全部出现的字符串1替换为字符串2，忽略字符串1中大小写
eg：/God
eg：:s/God/Devil
eg：:s/god/Devil/i
eg：:s/God/Devil/g
eg：:s/god/Devil/ig

:%s  对全文操作
:%s/^[a]/[b]/g  将全文每一行以 "a" 开头的行的 "a" 替换为 "b"
eg：:%s/God/Devil/g  将全文的 "God" 替换为 "Devil"
eg: :%s/^ //g  将全文以空格起始的行的空格替换为空，即删除以空格为起始行的行首的一个空格。

sed "s/[字符串1]/[字符串2]/[i/g]" [文件]  对文件内容实施替换，但不写回
注：这个不是在vim里操作的，是在命令行
eg：sed "s/printf/puts/g" main.c  将 main.c 里出现的 "printf" 全部替换为 "puts" ，打印在显示屏上
eg：sed -i "s/printf/puts/g" *.c  将当前目录下(不包括子目录)所有 .c 后缀的文件里的 "printf" 全部替换为 "puts" ，并写回文件
eg: find . -name "*.c" |xargs sed -i "s/puts/printf/g"
```
## 5.块操作
```
v 可视化块选择状态，选中块之后，可以对块进行删除(d)，复制(y),剪切(x)
注：没什么用，一般按 Ctrl+v 进行竖向选择，然后按 shift+i ，输入 // 后按 Esc ，实现块注释
注：如果代码格式很乱，可以使用 gg=G 格式化代码 
yy  复制光标所在的整行
[n]yy  从光标开始往下复制n 行,[n]表示一个整数
p  将复制后的文本粘贴到光标处
u  撤销上次操作
注：vim的删除和复制公用一个缓冲区，也就是说，如果先 yy 一行，然后再 dd 一行，最后 p 出来的是 dd 那一行
注：所以剪切的实现就是 dd + p 
```
## 6.结束编辑
```
结束编辑：
:q  在未修改文档的情况下退出
:q!  放弃文档的修改，强行退出
:w  文档存盘
:wq  文档存盘退出
:x  文档存盘退出
```
## 7.其他
```
:%!xxd  查看文本的十六进制模式
:%!xxd –r  上面的逆操作
如果在编辑过程中不小心按了 Ctrl+s ，vim 会处于僵死状态，按 Ctrl+q 可以恢复。
vim +3 main.c  定位到 main.c 的第 3 行
vim +/printf main.c  定位到第一个 printf 处
:new 2.c  表示再打开一个vim，是横向的，用 :vnew 2.c 表示纵向
也可以通过:split vsplit sp vsp，两个窗口之间进行切换的方式：Ctrl+ww
sed: 管道查找替换程序
cat a.txt | sed 's/aa/bb/' > b.txt //将a.txt 中的aa 替换成bb 并重定向输出到b.txt 中。
```

